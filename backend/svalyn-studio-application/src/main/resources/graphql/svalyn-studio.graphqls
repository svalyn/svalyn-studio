directive @validated on FIELD_DEFINITION

type Query {
  viewer: Viewer
}

type PageInfo {
  count: Int!
}

type Viewer {
  name: String!
  imageUrl: String!
  invitations(page: Int!, rowsPerPage: Int!): ViewerInvitationsConnection!
  organizations: ViewerOrganizationsConnection!
  organization(identifier: ID!): Organization
  project(identifier: ID!): Project
  changeProposal(id: ID!): ChangeProposal
}

type ViewerInvitationsConnection {
  edges: [ViewerInvitationsEdge!]!
  pageInfo: PageInfo!
}

type ViewerInvitationsEdge {
  node: Invitation!
}

type ViewerOrganizationsConnection {
  edges: [ViewerOrganizationsEdge!]!
}

type ViewerOrganizationsEdge {
  node: Organization!
}

type Organization {
  identifier: ID!
  name: String!
  role: MembershipRole!
  invitations(page: Int!, rowsPerPage: Int!): OrganizationInvitationsConnection!
  memberships(page: Int!, rowsPerPage: Int!): OrganizationMembershipsConnection!
  projects(page: Int!, rowsPerPage: Int!): OrganizationProjectsConnection!
}

enum MembershipRole {
  ADMIN
  MEMBER
  NONE
}

type OrganizationInvitationsConnection {
  edges: [OrganizationInvitationsEdge!]!
  pageInfo: PageInfo!
}

type OrganizationInvitationsEdge {
  node: Invitation!
}

type Invitation {
  id: ID!
  organization: Organization!
  member: Profile!
}

type OrganizationMembershipsConnection {
  edges: [OrganizationMembershipsEdge!]!
  pageInfo: PageInfo!
}

type OrganizationMembershipsEdge {
  node: Membership!
}

type Membership {
  id: ID!
  member: Profile!
}

type Profile {
  name: String!
  imageUrl: String!
}

type OrganizationProjectsConnection {
  edges: [OrganizationProjectsEdge!]!
  pageInfo: PageInfo!
}

type OrganizationProjectsEdge {
  node: Project!
}

type Project {
  identifier: ID!
  name: String!
  description: String!
  readMe: String!
  changeProposals(page: Int!, rowsPerPage: Int!): ProjectChangeProposalsConnection!
  organization: Organization!
}

type ProjectChangeProposalsConnection {
  edges: [ProjectChangeProposalsEdge!]!
  pageInfo: PageInfo!
}

type ProjectChangeProposalsEdge {
  node: ChangeProposal!
}

type ChangeProposal {
  id: ID!
  name: String!
  readMe: String!
  status: ChangeProposalStatus!
  project: Project!
  resources: ChangeProposalResourcesConnection!
  reviews: ChangeProposalReviewsConnection!
}

enum ChangeProposalStatus {
  OPEN
  INTEGRATED
  CLOSED
}

type ChangeProposalResourcesConnection {
  edges: [ChangeProposalResourcesEdge!]!
}

type ChangeProposalResourcesEdge {
  node: ChangeProposalResource!
}

type ChangeProposalResource {
  id: ID!
  name: String!
  content: String!
}

type ChangeProposalReviewsConnection {
  edges: [ChangeProposalReviewsEdge!]!
}

type ChangeProposalReviewsEdge {
  node: Review!
}

type Review {
  id: ID!
  message: String!
  status: ReviewStatus!
}

enum ReviewStatus {
  APPROVED
  REQUESTED_CHANGES
}

type Mutation {
  createOrganization(input: CreateOrganizationInput!): CreateOrganizationPayload! @validated
  updateOrganizationName(input: UpdateOrganizationNameInput!): UpdateOrganizationNamePayload! @validated
  inviteMember(input: InviteMemberInput!): InviteMemberPayload! @validated
  revokeInvitation(input: RevokeInvitationInput!): RevokeInvitationPayload! @validated
  acceptInvitation(input: AcceptInvitationInput!): AcceptInvitationPayload! @validated
  declineInvitation(input: DeclineInvitationInput!): DeclineInvitationPayload! @validated
  revokeMemberships(input: RevokeMembershipsInput!): RevokeMembershipsPayload! @validated
  leaveOrganization(input: LeaveOrganizationInput!): LeaveOrganizationPayload! @validated
  deleteOrganization(input: DeleteOrganizationInput!): DeleteOrganizationPayload! @validated
  createProject(input: CreateProjectInput!): CreateProjectPayload! @validated
  updateProjectName(input: UpdateProjectNameInput!): UpdateProjectNamePayload! @validated
  updateProjectDescription(input: UpdateProjectDescriptionInput!): UpdateProjectDescriptionPayload! @validated
  updateProjectReadMe(input: UpdateProjectReadMeInput!): UpdateProjectReadMePayload! @validated
  deleteProject(input: DeleteProjectInput!): DeleteProjectPayload! @validated
  createChangeProposal(input: CreateChangeProposalInput!): CreateChangeProposalPayload! @validated
  updateChangeProposalReadMe(input: UpdateChangeProposalReadMeInput!): UpdateChangeProposalReadMePayload! @validated
  updateChangeProposalStatus(input: UpdateChangeProposalStatusInput!): UpdateChangeProposalStatusPayload! @validated
  deleteChangeProposals(input: DeleteChangeProposalsInput!): DeleteChangeProposalsPayload! @validated
  performReview(input: PerformReviewInput!): PerformReviewPayload! @validated
}

type ErrorPayload {
  message: String!
}

input CreateOrganizationInput {
  identifier: ID!
  name: String!
}

union CreateOrganizationPayload = ErrorPayload | CreateOrganizationSuccessPayload

type CreateOrganizationSuccessPayload {
  organization: Organization!
}

input UpdateOrganizationNameInput {
  organizationIdentifier: ID!
  name: String!
}

union UpdateOrganizationNamePayload = ErrorPayload | UpdateOrganizationNameSuccessPayload

type UpdateOrganizationNameSuccessPayload {
  id: ID!
}

input InviteMemberInput {
  organizationIdentifier: ID!
  email: String!
}

union InviteMemberPayload = ErrorPayload | InviteMemberSuccessPayload

type InviteMemberSuccessPayload {
  id: ID!
}

input RevokeInvitationInput {
  organizationIdentifier: ID!
  invitationId: ID!
}

union RevokeInvitationPayload = ErrorPayload | RevokeInvitationSuccessPayload

type RevokeInvitationSuccessPayload {
  id: ID!
}

input AcceptInvitationInput {
  organizationIdentifier: ID!
  invitationId: ID!
}

union AcceptInvitationPayload = ErrorPayload | AcceptInvitationSuccessPayload

type AcceptInvitationSuccessPayload {
  id: ID!
}

input DeclineInvitationInput {
  organizationIdentifier: ID!
  invitationId: ID!
}

union DeclineInvitationPayload = ErrorPayload | DeclineInvitationSuccessPayload

type DeclineInvitationSuccessPayload {
  id: ID!
}

input RevokeMembershipsInput {
  organizationIdentifier: ID!
  membershipIds: [ID!]!
}

union RevokeMembershipsPayload = ErrorPayload | RevokeMembershipsSuccessPayload

type RevokeMembershipsSuccessPayload {
  id: ID!
}

input LeaveOrganizationInput {
  organizationIdentifier: ID!
}

union LeaveOrganizationPayload = ErrorPayload | LeaveOrganizationSuccessPayload

type LeaveOrganizationSuccessPayload {
  id: ID!
}

input DeleteOrganizationInput {
  organizationIdentifier: ID!
}

union DeleteOrganizationPayload = ErrorPayload | DeleteOrganizationSuccessPayload

type DeleteOrganizationSuccessPayload {
  id: ID!
}

input CreateProjectInput {
  organizationIdentifier: ID!
  identifier: ID!
  name: String!
  description: String!
}

union CreateProjectPayload = ErrorPayload | CreateProjectSuccessPayload

type CreateProjectSuccessPayload {
  project: Project!
}

input UpdateProjectNameInput {
  projectIdentifier: ID!
  name: String!
}

union UpdateProjectNamePayload = ErrorPayload | UpdateProjectNameSuccessPayload

type UpdateProjectNameSuccessPayload {
  id: ID!
}

input UpdateProjectDescriptionInput {
  projectIdentifier: ID!
  description: String!
}

union UpdateProjectDescriptionPayload = ErrorPayload | UpdateProjectDescriptionSuccessPayload

type UpdateProjectDescriptionSuccessPayload {
  id: ID!
}

input UpdateProjectReadMeInput {
  projectIdentifier: ID!
  content: String!
}

union UpdateProjectReadMePayload = ErrorPayload | UpdateProjectReadMeSuccessPayload

type UpdateProjectReadMeSuccessPayload {
  id: ID!
}

input DeleteProjectInput {
  projectIdentifier: ID!
}

union DeleteProjectPayload = ErrorPayload | DeleteProjectSuccessPayload

type DeleteProjectSuccessPayload {
  id: ID!
}

input CreateChangeProposalInput {
  projectIdentifier: ID!
  name: String!
  resourceIds: [ID!]!
}

union CreateChangeProposalPayload = ErrorPayload | CreateChangeProposalSuccessPayload

type CreateChangeProposalSuccessPayload {
  changeProposal: ChangeProposal!
}

input UpdateChangeProposalReadMeInput {
  changeProposalId: ID!
  content: String!
}

union UpdateChangeProposalReadMePayload = ErrorPayload | UpdateChangeProposalReadMeSuccessPayload

type UpdateChangeProposalReadMeSuccessPayload {
  id: ID!
}

input UpdateChangeProposalStatusInput {
  changeProposalId: ID!
  status: ChangeProposalStatus!
}

union UpdateChangeProposalStatusPayload = ErrorPayload | UpdateChangeProposalStatusSuccessPayload

type UpdateChangeProposalStatusSuccessPayload {
  changeProposal: ChangeProposal!
}

input DeleteChangeProposalsInput {
  changeProposalIds: [ID!]!
}

union DeleteChangeProposalsPayload = ErrorPayload | DeleteChangeProposalsSuccessPayload

type DeleteChangeProposalsSuccessPayload {
  id: ID!
}

input PerformReviewInput {
  changeProposalId: ID!
  message: String!
  status: ReviewStatus!
}

union PerformReviewPayload = ErrorPayload | PerformReviewSuccessPayload

type PerformReviewSuccessPayload {
  id: ID!
}